<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog | TomMustBe12</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
  <nav>
    <h3>TomMustBe12 Blog</h3>
    <a href="index.html">All Blog Posts</a>
  </nav>

  <div class="largeContainer" id="blogContainer">
    <p>Loading blog...</p>
  </div>

  <script>
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    async function loadBlog() {
      const id = getQueryParam('id');
      const container = document.getElementById('blogContainer');
      if (!id) {
        container.innerHTML = '<p>No blog ID provided.</p>';
        return;
      }

      try {
        const res = await fetch(`https://tmb12.link/blogs/${id}`);
        if (!res.ok) throw new Error('Blog not found');
        const blog = await res.json();

        // Fill the container with your previous style structure
        container.innerHTML = `
          <div class="stickyInfo">
            <div class="author">Author: ${blog.author || 'TomMustBe12'}</div>
            <div class="date">Date: ${blog.dateTime}</div>
          </div>
          <div class="content">
            <div class="title">
              <h1>${blog.title}</h1>
              ${blog.subtitle ? `<sub>${blog.subtitle}</sub>` : ''}
            </div>
            ${blog.imageUrl ? `<div class="image"><img src="${blog.imageUrl}" alt="${blog.title}"></div>` : ''}
            <div class="blogText">${blog.content}</div>
          </div>
        `;
      } catch (err) {
        console.error(err);
        container.innerHTML = `<p>Error loading blog: ${err.message}</p>`;
      }
    }

    window.addEventListener('DOMContentLoaded', loadBlog);
  </script>
</body>
</html>
